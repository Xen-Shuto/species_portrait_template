------------------------------------------------------------------------
--  StellarisポートレートMOD作成用テンプレート
--  作った人：Xen-Shuto
--  更新履歴
--    00.00.008：2026/01/15：4.*.*に対応（以前は少し問題あったけど問題無かった）
--                           雑に英語に対応
--    00.00.007：2025/07/28：名称リストに対応
--    00.00.006：2025/06/08：portrait_setsのspecies_classを修正
--    00.00.005：2025/06/07：対応バージョンを4.*.*に修正
--    00.00.004：2025/02/16：都市外観名称、艦船外観名称等に悪影響があったため、内部のディレクトリ名、ファイル名を変更。
--    00.00.003：2024/08/20：portrait_categoriesを種族ごとに分割。サンプル画像差し替え。
--    00.00.002：2024/08/17：GitHubに登録。体裁を整える。
--    00.00.001：2024/08/16：新規作成
--
--  タブは4文字
------------------------------------------------------------------------
・はじめに
　これは自分がStellarisのポートレートMOD作成するにあたり、
　めんどくせぇ・・・雛型でもあれば良いのにと思い立ち、
　どうせ作るなら誰でも使えるようなものがあればいいのでは？
　需要があればだけど・・・

　というわけで、MOD作成ガイドのコメント欄に書き込んだところ、
　反応があったので、急遽説明書きを取りまとめたものとなります。


・できること
　・静止画ポートレートMODの作成

・できないこと
　・上記以外
　　アニメーションポートレートMODの作成
　　名称リストとの連動
　　その他、起源やイベントの追加など

・必要なもの
　・テキストエディタ
　　notepad（メモ帳）ではダメ！
　　文字コード指定の出来るテキストエディタが必要
　　編集するファイルはテキストだが、全てUTF-8 BOM無し（ローカライズのみBOM有り）なので

　・ポートレート用の画像
　　最低でも１枚は用意すること
　　※画像生成AIで作成した画像をサンプル画像として添付しています。

　・画像編集ソフト
　　DDS(DirectDraw surface)形式とPSD（Photoshopドキュメント）形式が取り扱えて、
　　背景が透過できる物（この２形式が取り扱えるなら、背景の透過はできるはず）
　　作者はPaint.netを使用した


・その他
　・作者の環境では雛型のままでポートレートを追加してプレイできることは確認済みなので、
　　追加できないぞと言われても困る

　・画像は自分で用意


・謝辞
　MOD作成ガイドのコメント欄で反応下さった方々、おかげで公開する踏ん切りがつきました。
　特に参考情報としてご自身が管理されているGitHubを教えて下さったのFatalErrorJP様、
　大変参考になりました。また、コードの添削ありがとうございました。
　ローカライズ定義のコメントを使わせて頂いてます。

------------------------------------------------------------------------
--  フォルダ構成
------------------------------------------------------------------------
species_portrait_template
│  readme.txt														：このファイル
│  template.psd													：ポートレート画像のテンプレ（位置確認用）
│
└─MOD
    │  mod_portrait_Template.mod									：PC用MOD定義
    │
    └─portrait_Template											：ポートレートMOD本体
        │  descriptor.mod											：ランチャー用MOD定義
        │
        ├─common
        │  ├─name_lists											：名称リスト定義
        │  │      00_Template_name_lists_01_bio.txt				：　有機生命体用定義
        │  │      00_Template_name_lists_02_mech.txt				：　機械知性用定義
        │  │      00_Template_name_lists_03_lithoid.txt			：　岩石種族用定義
        │  │
        │  ├─portrait_categories									：種族選択画面表示用定義
        │  │      00_Template_portrait_categories_01_bio.txt		：　有機生命体用定義
        │  │      00_Template_portrait_categories_02_mech.txt		：　機械知性用定義
        │  │      00_Template_portrait_categories_03_lithoid.txt	：　岩石種族用定義
        │  │
        │  ├─portrait_sets										：種族ポートレート定義
        │  │      00_Template_portrait_sets_01_bio.txt			：　有機生命体用定義
        │  │      00_Template_portrait_sets_02_mech.txt			：　機械知性用定義
        │  │      00_Template_portrait_sets_03_lithoid.txt		：　岩石種族用定義
        │  │
        │  ├─species_classes										：種族定義
        │  │      00_Template_species_classes_01_bio.txt			：　有機生命体用定義
        │  │      00_Template_species_classes_02_mech.txt			：　機械知性用定義
        │  │      00_Template_species_classes_03_lithoid.txt		：　岩石種族用定義
        │  │
        │  └─species_names										：種族名称定義
        │          00_Template_species_names_01_bio.txt			：　有機生命体用定義
        │          00_Template_species_names_02_mech.txt			：　機械知性用定義
        │          00_Template_species_names_03_lithoid.txt		：　岩石種族用定義
        │
        ├─gfx
        │  ├─models												：ポートレート画像格納フォルダ
        │  │  ├─Template_01_bio									：有機生命体用ポートレート画像
        │  │  │      Template_bio_sample001.dds					：　サンプル画像[役人/男性]	※役職でわける必要は無い
        │  │  │      Template_bio_sample002.dds					：　サンプル画像[役人/女性]
        │  │  │      Template_bio_sample101.dds					：　サンプル画像[科学者/男性]
        │  │  │      Template_bio_sample102.dds					：　サンプル画像[科学者/女性]
        │  │  │      Template_bio_sample201.dds					：　サンプル画像[司令官/男性]
        │  │  │      Template_bio_sample202.dds					：　サンプル画像[司令官/女性]
        │  │  │      Template_bio_sample301.dds					：　サンプル画像[使節/男性]
        │  │  │      Template_bio_sample302.dds					：　サンプル画像[使節/女性]
        │  │  │      Template_bio_sample901.dds					：　サンプル画像[汎用/男性]
        │  │  │      Template_bio_sample902.dds					：　サンプル画像[汎用/女性]
        │  │  │
        │  │  ├─Template_02_mech							：機械知性用ポートレート画像
        │  │  │      Template_mech_sample001.dds					：　サンプル画像[役人/男性]	※役職でわける必要は無い
        │  │  │      Template_mech_sample002.dds					：　サンプル画像[役人/女性]
        │  │  │      Template_mech_sample101.dds					：　サンプル画像[科学者/男性]
        │  │  │      Template_mech_sample102.dds					：　サンプル画像[科学者/女性]
        │  │  │      Template_mech_sample201.dds					：　サンプル画像[司令官/男性]
        │  │  │      Template_mech_sample202.dds					：　サンプル画像[司令官/女性]
        │  │  │      Template_mech_sample301.dds					：　サンプル画像[使節/男性]
        │  │  │      Template_mech_sample302.dds					：　サンプル画像[使節/女性]
        │  │  │      Template_mech_sample901.dds					：　サンプル画像[汎用/男性]
        │  │  │      Template_mech_sample902.dds					：　サンプル画像[汎用/女性]
        │  │  │
        │  │  └─Template_03_lithoid								：岩石種族用ポートレート画像
        │  │          Template_lit_sample001.dds					：　サンプル画像[役人/男性]	※役職でわける必要は無い
        │  │          Template_lit_sample002.dds					：　サンプル画像[役人/女性]
        │  │          Template_lit_sample101.dds					：　サンプル画像[科学者/男性]
        │  │          Template_lit_sample102.dds					：　サンプル画像[科学者/女性]
        │  │          Template_lit_sample201.dds					：　サンプル画像[司令官/男性]
        │  │          Template_lit_sample202.dds					：　サンプル画像[司令官/女性]
        │  │          Template_lit_sample301.dds					：　サンプル画像[使節/男性]
        │  │          Template_lit_sample302.dds					：　サンプル画像[使節/女性]
        │  │          Template_lit_sample901.dds					：　サンプル画像[汎用/男性]
        │  │          Template_lit_sample902.dds					：　サンプル画像[汎用/女性]
        │  │
        │  └─portraits
        │      └─portraits										：ポートレート定義
        │              00_Template_portraits_01_bio.txt			：　有機生命体用定義
        │              00_Template_portraits_02_mech.txt			：　機械知性用定義
        │              00_Template_portraits_03_lithoid.txt		：　岩石種族用定義
        │
        └─localisation											：ローカライズ定義（言語ごと）
            ├─english												：英語用定義（他には葡/仏/独/波/露/西/韓/中がある）
            │  │  Template_l_english.yml							：　共通の定義
            │  │  Template_l_english_01_bio.yml					：　有機生命体用定義
            │  │  Template_l_english_02_mech.yml					：　機械知性用定義
            │  │  Template_l_english_03_lithoid.yml				：　岩石種族用定義
            │  │  
            │  └─name_lists										：名称リストを自分で定義する時用のフォルダ
            └─japanese											：日本語用定義（他には葡/仏/独/波/露/西/韓/中がある）
                │  Template_l_japanese.yml							：　共通の定義
                │  Template_l_japanese_01_bio.yml					：　有機生命体用定義
                │  Template_l_japanese_02_mech.yml					：　機械知性用定義
                │  Template_l_japanese_03_lithoid.yml				：　岩石種族用定義
                │  
                └─name_lists										：名称リストを自分で定義する時用のフォルダ

------------------------------------------------------------------------
--  説明
------------------------------------------------------------------------
とりあえずMODフォルダの中にある

  portrait_Template		※フォルダごと
  mod_portrait_Template.mod

の２つをMOD格納用フォルダに突っ込めば、
種族リストに「雛型」という名称でテスト用の画像を使った
ポートレートが選択可能になります。

▼MOD格納用フォルダ（Windowsの設定を変えていなければ）
C:\Users\(ユーザー名)\Documents\Paradox Interactive\Stellaris\mod\

------------------------------------------------------------------------
--  設定方法
------------------------------------------------------------------------
一応、以下の手順で自前のポートレート追加MODにできるけど、
めんどくさければ（種族名等を気にしないのであれば）画像の差し替えだけで機能する。


１）フォルダ名、ファイル名の変更

　※そのまま使ってもいいけど、後から別のポートレート増やしたいなら変えておくのを推奨

　・フォルダ名、ファイル名に含まれる「Template」を全て変更する
　　種族名の英字が良いと思います。


２）MOD定義の編集

　・MODの名称を設定する
　　また、フォルダ名も変更しているはずなので、ここで修正する

********
	version="0.0.1"					：このMODのバージョン（お好きな値で）
	tags={
		"Species"					：ここはMODの追加時に設定したタグなので、特に変える必要は無い
	}
	name="Portrait Mod Template"	：たぶんワークショップに表示されるMODの名前（わかり易い名前に）
	supported_version="v4.*.*"		：MODが対応するゲームのバージョン（多少違っても問題ない。26/1/11時点ではv4.2.4）
	path="mod/portrait_Template"	：MODのパス　変更後のフォルダ名に変更する
********

　・UTF-8 BOM無しで保存する


３）ランチャー用MOD定義の編集

　・MODの名称を設定する

********
	version="0.0.1"					：このMODのバージョン（お好きな値で）
	tags={
		"Species"					：ここはMODの追加時に設定したタグなので、特に変える必要は無い
	}
	name="Portrait Mod Template"	：ランチャーに表示されるMODの名前（わかり易い名前に）
	supported_version="v4.*.*"		：MODが対応するゲームのバージョン（多少違っても問題ない。26/1/11時点ではv4.2.4）
********

　・UTF-8 BOM無しで保存する


４）名称リスト定義（species_classes）の編集

　・有機生命体用、機械知性用、岩石種族用のファイルがあるので、
　　不要な種族を削除する。

　・各ファイルの種族識別子を変更する（必須）
　　※「MODTPL」の部分を変更する。

　・SJISで保存する


５）種族選択画面表示用定義（portrait_categories）の編集

　・種族グループ識別子を変更する（必須）
　　※１と同じ名称を使用して「Template」の部分を変更する。

　・SJISで保存する


６）種族ポートレート定義（portrait_sets）の編集

　・有機生命体用、機械知性用、岩石種族用のファイルがあるので、
　　不要な種族を削除する。

　・各ファイルの種族カテゴリー内識別子を変更する（必須）
　　※１と同じ名称を使用して「Template」の部分を変更する。

　・SJISで保存する


７）種族定義（species_classes）の編集

　・有機生命体用、機械知性用、岩石種族用のファイルがあるので、
　　不要な種族を削除する。

　・各ファイルの種族識別子を変更する（必須）
　　※４と同じ名称を使用して「MODTPL」の部分を変更する。

　・その他の設定はお好みで
　※利用可能な条件、プレイ条件は必須のＤＬＣがあったりするので変えない事

　・SJISで保存する


８）種族名称定義（species_names）の編集

　・有機生命体用、機械知性用、岩石種族用のファイルがあるので、
　　不要な種族を削除する。

　・各ファイルの種族識別子を変更する（必須）
　　※４と同じ名称を使用して「MODTPL」の部分を変更する。

　・SJISで保存する


９）ローカライズ定義の編集

　・各ファイルの種族カテゴリー内識別子を変更する（必須）
　　※１と同じ名称を使用して「Template」の部分を変更する。

　・各ファイルの種族識別子を変更する（必須）
　　※４と同じ名称を使用して「MODTPL」の部分を変更する。

　・種族グループ名、名前、形容詞、ホーム惑星や星系の名称を設定する

　・UTF-8 BOM有りで保存する


１０）画像を用意する

　・Paint.Netがあると良い

　・画像サイズは360x360 （最大でも400pxまでが推奨。左右は560pxくらいまでいける。）

　・同梱しているtemplate.psdで表示範囲を確認しながら、サイズと配置を決める
　　上左右は枠内に収めると見栄えが良い。下ははみ出すくらいに

　・背景を透過する

　・DDS(DirectDraw surface)形式で保存する

　・作成したDDS形式の画像をポートレート画像格納フォルダに配置する


１１）ポートレート定義（portraits）の編集

　・有機生命体用、機械知性用、岩石種族用のファイルがあるので、
　　不要な種族を削除する。

　・画像のパスを変更する（必須）
　※１と同じ名称を使用して「Template」の部分を変更する。

　・画像ファイルの指定
　　portrait000 = {texturefile = "gfx/models/xxxxx/gazou.dds"}　を、作成した画像に合わせて
　　必要な数だけ記述する
　　「=」の左側は識別子、右側が画像ファイルのパス（gfxフォルダから始まる相対パス）
　　※「portrait000」は以降で使用する画像識別子（全体を通して重複しないこと）
　　※「xxxxx」は「Template」から変更した種族名の英字
　　※「gazou.dds」は実際の画像ファイル名

　・各設定で私用したいポートレートを識別子で記述する
　　portraitsの中にあるtxtを見てもらえば、たぶんわかると思う・・・

　・SJISで保存する


１２）MODの配置と動作確認

　・MOD格納用フォルダにMOD定義とポートレートMODフォルダを配置する

　・Stellarisを起動する

　・ランチャー左側の「インストール済みのすべてのMOD」を選択し、作成したMODが表示されているか確認する
　　表示されていない場合、MODの再ロードを試みる
　　⇒それでも表示されない場合、MODの配置場所か「２）MOD定義の編集」を間違えていると思います。
　　　見直してください。

　・プレイセットに作成したMODを追加する

　・MODを追加したプレイセットでStellarisを起動する

　・ニューゲーム→新規作成と選択し、以下を確認する

　　・外見：作成した種族が一覧に表示されているか
　　　　⇒表示されない場合、種族選択画面表示用定義が誤っていると思われる
　　　　　見直してください。
　　　　⇒表示されるが名称がおかしい場合、ローカライズ定義が誤っていると思われる
　　　　　見直してください。

　　・外見選択後、ポートレートの一覧が表示されるか
　　　　⇒表示されない場合、種族定義、種族ポートレート定義、ポートレート定義が誤っていると思われる
　　　　　見直してください。

　　・統治者の外見が表示されるか、性別、遺伝的形質の変更でポートレートも切り替わるか
　　　　⇒外見が表示されない場合、ポートレート定義が誤っている
　　　　　見直してください。
　　　　⇒性別変更で画像が切り替わらない場合、ポートレート定義が誤っているか、そもそも１つしか定義していない
　　　　　見直してください。
　　　　⇒遺伝的形質の変更で画像が切り替わらない場合、ポートレート定義が誤っているか、そもそも１つしか定義していない
　　　　　見直してください。

　　・上記が問題無ければゲームを開始する

　　・各種画面でポートレートが想定通りに表示されているか
　　　　⇒表示されていない場合、ポートレート定義が誤っている
　　　　　見直してください。
　　　　⇒ずれて表示されている場合、template.psdで画像の配置を確認してDDS画像ファイルを作り直す


１３）おつかれさまでした！

　・ここまできたら正常にゲームがプレイできるはずです。
　　おつかれさまでした！




